/* ===================================================================
   Prometheus CRM/static/css/calendars.css
   Description: Styles for the FullCalendar library, mimicking Bitrix24 UI.
   Depends on: variables.css, global.css
   =================================================================== */

/* --- 1. Основные переменные и контейнер --- */
#calendar-wrapper {
    /* Используем переменные из global.css для консистентности */
    --fc-border-color: var(--border-color);
    --fc-page-bg-color: var(--card-background-color);
    --fc-neutral-bg-color: var(--background-color);
    --fc-list-event-dot-width: 10px;
    --fc-list-event-hover-bg-color: var(--background-color);
    
    /* Цвета кнопок в стиле Битрикс */
    --fc-button-text-color: var(--text-color-secondary);
    --fc-button-bg-color: var(--card-background-color);
    --fc-button-border-color: #c6cdd3;
    --fc-button-hover-bg-color: #f6f8f9;
    --fc-button-hover-border-color: #b9c1c9;
    --fc-button-active-bg-color: #eef2f4;
    --fc-button-active-border-color: #b0b8c1;
    
    /* Подсветка сегодняшнего дня */
    --fc-today-bg-color: #fffde3;
}

#calendar {
    font-family: var(--font-family-base);
    background-color: var(--card-background-color);
    padding: var(--spacing-lg);
    border-radius: var(--border-radius-md);
}

/* --- 2. Стилизация шапки (заголовок и кнопки) --- */
.fc-toolbar-title {
    font-size: 1.75rem; /* 28px */
    font-weight: 600;
    color: var(--text-color-primary);
}

.fc .fc-button {
    text-transform: none; /* Убираем верхний регистр */
    font-size: var(--font-size-sm); /* 14px */
    border-radius: var(--border-radius-md);
    padding: 0.5rem 1rem; /* 8px 16px */
    box-shadow: none !important;
    transition: all 0.2s ease;
    font-weight: 500;
}

.fc .fc-button-primary {
    background-color: var(--fc-button-bg-color);
    border: 1px solid var(--fc-button-border-color);
    color: var(--fc-button-text-color);
}

.fc .fc-button-primary:not(:disabled):hover {
    background-color: var(--fc-button-hover-bg-color);
    border-color: var(--fc-button-hover-border-color);
    color: var(--text-color-primary);
}

/* Активная кнопка (Сегодня, Месяц, Неделя) */
.fc .fc-button-primary:not(:disabled).fc-button-active {
    background-color: var(--primary-color);
    border-color: var(--primary-color);
    color: #fff;
}

/* --- 3. Стилизация сетки календаря --- */
.fc .fc-col-header-cell-cushion { /* Заголовки дней недели */
    font-size: 0.8rem; /* 12.8px */
    color: var(--text-color-secondary);
    padding: 10px 4px;
    text-decoration: none;
    font-weight: 600;
    text-transform: uppercase;
}

.fc .fc-daygrid-day-number { /* Номера дней */
    font-size: var(--font-size-sm);
    padding: 8px;
    color: var(--text-color-primary);
}

.fc .fc-day-today .fc-daygrid-day-number {
    font-weight: 700;
    color: var(--primary-color);
    background-color: rgba(74, 144, 226, 0.1);
    border-radius: 50%;
    width: 28px;
    height: 28px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

/* --- 4. Стилизация событий --- */
.fc-event {
    border: none !important;
    border-radius: var(--border-radius-sm);
    font-size: 13px;
    padding: 4px 8px;
    cursor: pointer;
    transition: opacity 0.2s ease;
    font-weight: 500;
    overflow: hidden;
}

.fc-event:hover {
    opacity: 0.85;
}

/* Стили по умолчанию для пользовательских событий */
.fc-daygrid-event {
    background-color: #e4f0ff;
    color: #005bff;
}

/* Расписание (зеленый цвет) */
.fc-event[style*="#28a745"] {
    background-color: #eaf6ec !important;
    color: #2f855a !important;
}

/* ДР сотрудника (оранжевый) */
.fc-event[style*="#f39c12"] { 
    background-color: #fef5e7 !important;
    color: #b7791f !important;
}

/* ДР ученика (синий) */
.fc-event[style*="#3498db"] { 
    background-color: #e1f0fa !important;
    color: #2a7ab0 !important;
}

/* --- 5. Модальное окно для событий --- */
#eventModal .modal-content {
    max-width: 600px;
}

#eventModal .form-group label {
    font-weight: 500;
}

#eventModal #event_participants {
    min-height: 120px;
}

/* Кнопка "Выбрать всех" */
.select-all-container {
    text-align: right;
    margin-top: -10px;
    margin-bottom: 15px;
}

.select-all-btn {
    background: none;
    border: none;
    color: var(--primary-color);
    cursor: pointer;
    font-size: var(--font-size-sm);
    font-weight: 500;
}

.select-all-btn:hover {
    text-decoration: underline;
}

/* --- 6. Всплывающая подсказка (Popover) --- */
.fc-popover {
    border: 1px solid var(--border-color);
    box-shadow: var(--shadow-md);
    border-radius: var(--border-radius-md);
}

.fc-popover-header {
    background-color: var(--background-color);
    color: var(--text-color-primary);
    font-size: 1rem;
    font-weight: 600;
    padding: var(--spacing-md);
}

.fc-popover-body {
    padding: var(--spacing-sm);
}


/* --- 7. Адаптивность --- */
@media (max-width: 768px) {
    .fc-toolbar-title {
        font-size: 1.25rem;
    }
    .fc .fc-button {
        padding: 0.4rem 0.6rem;
        font-size: 12px;
    }
    .fc .fc-toolbar.fc-header-toolbar {
        flex-direction: column;
        gap: 1rem;
    }
}
